{
  "team_name": "quality-assurance",
  "version": "1.0.0",
  "description": "质量保障团队 - 融合\"软件测试\"和\"问题发现\"两大能力域，形成发现→验证→修复→回归的闭环",
  "skill_entry": "team-quality-assurance",
  "invocation": "Skill(skill=\"team-quality-assurance\", args=\"--role=coordinator ...\")",

  "roles": {
    "coordinator": {
      "name": "coordinator",
      "responsibility": "Orchestration",
      "task_prefix": null,
      "description": "QA 团队协调者。编排 pipeline：需求澄清 → 模式选择 → 团队创建 → 任务分发 → 监控协调 → 质量门控 → 结果汇报",
      "message_types_sent": ["mode_selected", "gc_loop_trigger", "quality_gate", "task_unblocked", "error", "shutdown"],
      "message_types_received": ["scan_ready", "issues_found", "strategy_ready", "tests_generated", "tests_revised", "tests_passed", "tests_failed", "analysis_ready", "quality_report", "error"],
      "commands": ["dispatch", "monitor"]
    },
    "scout": {
      "name": "scout",
      "responsibility": "Orchestration (多视角扫描编排)",
      "task_prefix": "SCOUT-*",
      "description": "多视角问题侦察员。主动扫描代码库，从 bug、安全、UX、测试覆盖、代码质量等多个视角发现潜在问题",
      "message_types_sent": ["scan_ready", "issues_found", "error"],
      "message_types_received": [],
      "commands": ["scan"],
      "cli_tools": ["gemini"],
      "subagents": ["cli-explore-agent"]
    },
    "strategist": {
      "name": "strategist",
      "responsibility": "Orchestration (策略制定)",
      "task_prefix": "QASTRAT-*",
      "description": "测试策略师。分析变更范围，确定测试层级（L1-L3），定义覆盖率目标",
      "message_types_sent": ["strategy_ready", "error"],
      "message_types_received": [],
      "commands": ["analyze-scope"],
      "cli_tools": ["gemini"],
      "subagents": ["cli-explore-agent"]
    },
    "generator": {
      "name": "generator",
      "responsibility": "Code generation (测试代码生成)",
      "task_prefix": "QAGEN-*",
      "description": "测试用例生成器。按策略和层级生成测试代码，支持 L1/L2/L3",
      "message_types_sent": ["tests_generated", "tests_revised", "error"],
      "message_types_received": [],
      "commands": ["generate-tests"],
      "cli_tools": ["gemini"],
      "subagents": ["code-developer"]
    },
    "executor": {
      "name": "executor",
      "responsibility": "Validation (测试执行与修复)",
      "task_prefix": "QARUN-*",
      "description": "测试执行者。运行测试套件，收集覆盖率数据，失败时自动修复循环",
      "message_types_sent": ["tests_passed", "tests_failed", "coverage_report", "error"],
      "message_types_received": [],
      "commands": ["run-fix-cycle"],
      "subagents": ["code-developer"]
    },
    "analyst": {
      "name": "analyst",
      "responsibility": "Read-only analysis (质量分析)",
      "task_prefix": "QAANA-*",
      "description": "质量分析师。分析缺陷模式、覆盖率差距、测试有效性，生成综合质量报告",
      "message_types_sent": ["analysis_ready", "quality_report", "error"],
      "message_types_received": [],
      "commands": ["quality-report"],
      "cli_tools": ["gemini"]
    }
  },

  "pipeline_modes": {
    "discovery": {
      "description": "Scout先行扫描 → 全流程",
      "stages": ["SCOUT", "QASTRAT", "QAGEN", "QARUN", "QAANA"],
      "entry_role": "scout"
    },
    "testing": {
      "description": "跳过 Scout → 直接测试",
      "stages": ["QASTRAT", "QAGEN-L1", "QARUN-L1", "QAGEN-L2", "QARUN-L2", "QAANA"],
      "entry_role": "strategist"
    },
    "full": {
      "description": "完整 QA 闭环 + 回归扫描",
      "stages": ["SCOUT", "QASTRAT", "QAGEN-L1", "QAGEN-L2", "QARUN-L1", "QARUN-L2", "QAANA", "SCOUT-REG"],
      "entry_role": "scout",
      "parallel_stages": [["QAGEN-L1", "QAGEN-L2"], ["QARUN-L1", "QARUN-L2"]]
    }
  },

  "gc_loop": {
    "max_iterations": 3,
    "trigger": "coverage < target",
    "participants": ["generator", "executor"],
    "flow": "QAGEN-fix → QARUN-gc → evaluate"
  },

  "shared_memory": {
    "file": "shared-memory.json",
    "fields": {
      "discovered_issues": { "owner": "scout", "type": "array" },
      "test_strategy": { "owner": "strategist", "type": "object" },
      "generated_tests": { "owner": "generator", "type": "object" },
      "execution_results": { "owner": "executor", "type": "object" },
      "defect_patterns": { "owner": "analyst", "type": "array" },
      "coverage_history": { "owner": "analyst", "type": "array" },
      "quality_score": { "owner": "analyst", "type": "number" }
    }
  },

  "collaboration_patterns": [
    "CP-1: Linear Pipeline (Discovery/Testing mode)",
    "CP-2: Review-Fix Cycle (GC loop: Generator ↔ Executor)",
    "CP-3: Fan-out (Scout multi-perspective scan)",
    "CP-5: Escalation (Worker → Coordinator → User)",
    "CP-9: Dual-Track (Full mode: L1 + L2 parallel)",
    "CP-10: Post-Mortem (Analyst quality report)"
  ],

  "session_directory": {
    "pattern": ".workflow/.team/QA-{slug}-{date}",
    "subdirectories": ["scan", "strategy", "results", "analysis"]
  },

  "test_layers": {
    "L1": { "name": "Unit Tests", "default_target": 80 },
    "L2": { "name": "Integration Tests", "default_target": 60 },
    "L3": { "name": "E2E Tests", "default_target": 40 }
  }
}
