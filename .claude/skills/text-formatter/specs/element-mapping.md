# Element Mapping

å†…å®¹å…ƒç´ åˆ° BBCode + Markdown æ··åˆæ ¼å¼çš„æ˜ å°„è¡¨ã€‚

## When to Use

| Phase | Usage | Section |
|-------|-------|---------|
| Phase 2 | å…ƒç´ è¯†åˆ« | Detection patterns |
| Phase 3 | æ ¼å¼è½¬æ¢ | Conversion rules |

---

## Element Detection Patterns

### æ ‡é¢˜æ£€æµ‹

| ç±»å‹ | Pattern | ç¤ºä¾‹ |
|------|---------|------|
| ATX æ ‡é¢˜ | `/^#{1,6}\s+(.+)$/` | `# Title`, `## Subtitle` |
| Setext H1 | `/^(.+)\n={3,}$/` | `Title\n====` |
| Setext H2 | `/^(.+)\n-{3,}$/` | `Subtitle\n----` |

### åˆ—è¡¨æ£€æµ‹

| ç±»å‹ | Pattern | ç¤ºä¾‹ |
|------|---------|------|
| æ— åºåˆ—è¡¨ | `/^[\s]*[-*+]\s+(.+)$/` | `- item`, `* item` |
| æœ‰åºåˆ—è¡¨ | `/^[\s]*\d+\.\s+(.+)$/` | `1. item`, `2. item` |
| ä»»åŠ¡åˆ—è¡¨ | `/^[\s]*[-*]\s+\[([ x])\]\s+(.+)$/` | `- [ ] todo`, `- [x] done` |

### Callout æ£€æµ‹

| ç±»å‹ | Pattern | ç¤ºä¾‹ |
|------|---------|------|
| Callout å¼€å§‹ | `/^>\s*\[!(\w+)\](?:\s+(.+))?$/` | `> [!NOTE] æ ‡é¢˜` |
| Callout å†…å®¹ | `/^>\s*(.*)$/` | `> å†…å®¹è¡Œ` |
| å¯æŠ˜å å±•å¼€ | `/^>\s*\[!(\w+)\]\+/` | `> [!NOTE]+` |
| å¯æŠ˜å æ”¶èµ· | `/^>\s*\[!(\w+)\]-/` | `> [!NOTE]-` |

### ä»£ç æ£€æµ‹

| ç±»å‹ | Pattern | ç¤ºä¾‹ |
|------|---------|------|
| ä»£ç å—å¼€å§‹ | `/^```(\w*)$/` | ` ```js ` |
| ä»£ç å—ç»“æŸ | `/^```$/` | ` ``` ` |
| è¡Œå†…ä»£ç  | `/`([^`]+)`/` | `` `code` `` |

### å…¶ä»–å…ƒç´ 

| ç±»å‹ | Pattern | ç¤ºä¾‹ |
|------|---------|------|
| é“¾æ¥ | `/\[([^\]]+)\]\(([^)]+)\)/` | `[text](url)` |
| å›¾ç‰‡ | `/!\[([^\]]*)\]\(([^)]+)\)/` | `![alt](url)` |
| æ™®é€šå¼•ç”¨ | `/^>\s+(.+)$/` | `> quote` |
| åˆ†éš”çº¿ | `/^[-*_]{3,}$/` | `---`, `***` |
| é«˜äº® | `/==(.+?)==/` | `==highlight==` |
| ç²—ä½“ | `/\*\*(.+?)\*\*/` | `**bold**` |
| æ–œä½“ | `/\*(.+?)\*/` | `*italic*` |
| åˆ é™¤çº¿ | `/~~(.+?)~~/` | `~~strike~~` |

### HTML å…ƒç´ æ£€æµ‹

| ç±»å‹ | Pattern | ç¤ºä¾‹ |
|------|---------|------|
| é«˜äº® | `/<mark>(.+?)<\/mark>/` | `<mark>é«˜äº®</mark>` |
| æŠ˜å å— | `/<details>\s*<summary>(.+?)<\/summary>([\s\S]*?)<\/details>/` | `<details><summary>æ ‡é¢˜</summary>å†…å®¹</details>` |
| ä¸‹åˆ’çº¿ | `/<u>(.+?)<\/u>/` | `<u>ä¸‹åˆ’çº¿</u>` |

---

## Element Conversion Matrix

### æ ‡é¢˜æ˜ å°„ (Pixel-Based)

| Element | Markdown | BBCode Output |
|---------|----------|---------------|
| **H1** | `# text` | `[size=150][color=#2196F3][b]text[/b][/color][/size]` |
| **H2** | `## text` | `[size=120][color=#2196F3][b]text[/b][/color][/size]` |
| **H3** | `### text` | `[size=100][color=#333][b]text[/b][/color][/size]` |
| **H4** | `#### text` | `[b]text[/b]` |
| **H5** | `##### text` | `[b]text[/b]` |
| **H6** | `###### text` | `[b]text[/b]` |

### æ–‡æœ¬æ ·å¼æ˜ å°„

| Element | Markdown/HTML | BBCode |
|---------|---------------|--------|
| **Bold** | `**text**` æˆ– `__text__` | `[b]text[/b]` |
| **Italic** | `*text*` æˆ– `_text_` | `[i]text[/i]` |
| **Bold+Italic** | `***text***` | `[b][i]text[/i][/b]` |
| **Strike** | `~~text~~` | `[s]text[/s]` |
| **Underline** | `<u>text</u>` | `[u]text[/u]` |
| **Highlight** | `==text==` æˆ– `<mark>text</mark>` | `[color=yellow]text[/color]` |
| **Code (inline)** | `` `text` `` | ä¿æŒåŸæ · |

### HTML è½¬ BBCode æ˜ å°„

| HTML | BBCode |
|------|--------|
| `<mark>text</mark>` | `[color=yellow]text[/color]` |
| `<u>text</u>` | `[u]text[/u]` |
| `<details><summary>æ ‡é¢˜</summary>å†…å®¹</details>` | `[spoiler=æ ‡é¢˜]å†…å®¹[/spoiler]` |

### å—çº§å…ƒç´ æ˜ å°„

| Element | Markdown | BBCode |
|---------|----------|--------|
| **Code Block** | ` ```lang\ncode\n``` ` | `[code]code[/code]` |
| **Quote** | `> text` | `[quote]text[/quote]` |
| **HR** | `---` | `---` (ä¿æŒ Markdown) |
| **List Item** | `- text` | `â€¢ text` |
| **Paragraph** | `text\n\ntext` | `text\n\ntext` |

### é“¾æ¥å’Œåª’ä½“æ˜ å°„

| Element | Markdown | BBCode |
|---------|----------|--------|
| **Link** | `[text](url)` | `[url=url]text[/url]` |
| **Image** | `![alt](url)` | `[img]url[/img]` |

---

## Callout Mapping

### ç±»å‹åˆ°æ ·å¼æ˜ å°„

| Callout Type | Color | Icon | Label |
|--------------|-------|------|-------|
| note | #2196F3 | ğŸ“ | æ³¨æ„ |
| info | #2196F3 | â„¹ï¸ | ä¿¡æ¯ |
| tip | #4CAF50 | ğŸ’¡ | æç¤º |
| hint | #4CAF50 | ğŸ’¡ | æç¤º |
| success | #4CAF50 | âœ… | æˆåŠŸ |
| check | #4CAF50 | âœ… | å®Œæˆ |
| done | #4CAF50 | âœ… | å®Œæˆ |
| warning | #FF9800 | âš ï¸ | è­¦å‘Š |
| caution | #FF9800 | âš ï¸ | æ³¨æ„ |
| attention | #FF9800 | âš ï¸ | æ³¨æ„ |
| danger | #F44336 | âŒ | å±é™© |
| error | #F44336 | âŒ | é”™è¯¯ |
| bug | #F44336 | ğŸ› | Bug |
| example | #9C27B0 | ğŸ“‹ | ç¤ºä¾‹ |
| question | #FF9800 | â“ | é—®é¢˜ |
| help | #FF9800 | â“ | å¸®åŠ© |
| faq | #FF9800 | â“ | FAQ |
| quote | gray | ğŸ’¬ | å¼•ç”¨ |
| cite | gray | ğŸ’¬ | å¼•ç”¨ |
| abstract | #2196F3 | ğŸ“„ | æ‘˜è¦ |
| summary | #2196F3 | ğŸ“„ | æ‘˜è¦ |
| tldr | #2196F3 | ğŸ“„ | æ‘˜è¦ |
| todo | #FF9800 | ğŸ“‹ | å¾…åŠ |
| important | #F44336 | â­ | é‡è¦ |

### Callout è¾“å‡ºæ¨¡æ¿

```bbcode
[quote]
[size=100][color={color}][b]{icon} {title}[/b][/color][/size]

{content}
[/quote]
```

---

## Unsupported Elements

### ä¸æ”¯æŒè½¬æ¢çš„å…ƒç´ 

| å…ƒç´  | åŸå›  | é™çº§æ–¹æ¡ˆ |
|------|------|----------|
| è¡¨æ ¼ | BBCode è¡¨æ ¼æ”¯æŒæœ‰é™ | è½¬ä¸ºä»£ç å—æˆ–åˆ—è¡¨ |
| è„šæ³¨ | ä¸æ”¯æŒ | è½¬ä¸ºæ‹¬å·æ³¨é‡Š `(æ³¨: ...)` |
| æ•°å­¦å…¬å¼ | ä¸æ”¯æŒ | ä¿ç•™åŸå§‹æ–‡æœ¬ |
| åµŒå…¥å†…å®¹ | ä¸æ”¯æŒ | è½¬ä¸ºé“¾æ¥ |
| ä»»åŠ¡åˆ—è¡¨ | å¤é€‰æ¡†ä¸æ”¯æŒ | è½¬ä¸ºæ™®é€šåˆ—è¡¨ `â˜`/`â˜‘` |

### é™çº§ç¤ºä¾‹

**è¡¨æ ¼**:
```
| A | B |
|---|---|
| 1 | 2 |

â†’ é™çº§ä¸º:

A: 1
B: 2
```

**è„šæ³¨**:
```
æ–‡æœ¬[^1]

[^1]: è„šæ³¨å†…å®¹

â†’ é™çº§ä¸º:

æ–‡æœ¬ (æ³¨: è„šæ³¨å†…å®¹)
```

**ä»»åŠ¡åˆ—è¡¨**:
```
- [ ] å¾…åŠ
- [x] å·²å®Œæˆ

â†’ é™çº§ä¸º:

â˜ å¾…åŠ
â˜‘ å·²å®Œæˆ
```

---

## Validation Rules

### è½¬æ¢éªŒè¯

- [ ] æ‰€æœ‰ H1-H3 ä½¿ç”¨åƒç´ å€¼ size (150/120/100)
- [ ] æœªä½¿ç”¨ `[align]` æ ‡ç­¾
- [ ] æœªä½¿ç”¨ `[hr]` æ ‡ç­¾
- [ ] åˆ†éš”çº¿ä¿æŒ `---`
- [ ] Callout æ­£ç¡®è¯†åˆ«å¹¶è½¬æ¢
- [ ] é¢œè‰²å€¼ä½¿ç”¨ hex æ ¼å¼
